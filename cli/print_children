#!/usr/bin/env python

from argparse import ArgumentParser
from pathlib import Path
from sys import path
path.append(str(Path(__file__).parent.parent.absolute()))

from modules.data_folder_types import *

parser = ArgumentParser(
    prog='print_children',
    description='Parse subfolders of the current data folder and print their type')

parser.add_argument(
    '-i', '--input',
    dest='input',
    metavar='PATH',
    help='path to the input data folder',
    required=False)

parser.add_argument(
    '--type',
    dest='type',
    metavar='STRING',
    help='print only subfolders of a specific type',
    required=False)

parser.add_argument(
    '--algo',
    dest='algo',
    metavar='STRING',
    help='print only subfolders generated by a specific algo',
    required=False)

parser.add_argument(
    '--recursive',
    action='store_true',
    dest='recursive',
    help='recursively print children of subfolders')

args = parser.parse_args()


input_folder = root() if args.input == None else AbstractDataFolder.instantiate(args.input)
input_folder.print_children(
    [] if args.type == None else [args.type],
    [] if args.algo == None else [args.algo],
    args.recursive)